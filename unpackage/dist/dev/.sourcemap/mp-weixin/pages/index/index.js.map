{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/tongxun/tongXun/pages/index/index.vue?c5e9","webpack:///C:/Users/Administrator/Desktop/tongxun/tongXun/pages/index/index.vue?92e3","webpack:///C:/Users/Administrator/Desktop/tongxun/tongXun/pages/index/index.vue?26bc","webpack:///C:/Users/Administrator/Desktop/tongxun/tongXun/pages/index/index.vue?88e5","uni-app:///pages/index/index.vue","webpack:///C:/Users/Administrator/Desktop/tongxun/tongXun/pages/index/index.vue?5dc5","webpack:///C:/Users/Administrator/Desktop/tongxun/tongXun/pages/index/index.vue?6c06"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;;;;;;;;;;;;;kDAAA;;;AAGA;AACA,4F,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAspB,CAAgB,2qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2E1qB;AACA,wG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,UADA,EAEA,UAFA,EAGA,UAHA,EAIA,SAJA,EAKA,aALA,EAKA;AACA,qBANA,EAMA;AACA,sBAPA,EAQA,eARA,GAUA,CAZA,EAaA,MAbA,oBAaA,CACA,uBACA,qBACA,qBACA,uBACA,CAlBA,EAsBA,iBAtBA,+BAsBA;AACA,0BACA,qBACA,CAzBA,EA4BA,WACA;AACA,mBAFA,6BAEA,CACA,KACA,uCACA,YACA,uBACA,yBACA,wDACA,CAJA,MAIA,CACA,iBACA,qBADA,IAGA,CACA,CAXA,CAWA,iBACA,sBACA,CACA,CAjBA,EAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,iBA9BA,2BA8BA,kBACA,iBACA,cACA,yCADA,EAEA,QACA,mBADA,EAEA,QAFA,EAFA,EAMA,cANA,EAOA,gCAEA,KADA,IACA,QADA,IACA,CACA,yBACA,oBAFA,CAEA;AACA,8BACA,qBACA,yBACA,wDACA,sCACA,gCACA,wBACA,CALA,EAMA,CACA,qBAEA,CAXA,MAWA,CACA,gBACA,iBADA,EAEA,YAFA;AAGA,4BAHA;;AAKA;AACA;AACA;AACA;AACA;AACA,SAlCA;;AAoCA,KApEA;;AAsEA;AACA,iBAvEA,2BAuEA;AACA;AACA,iDADA;AAEA;AACA,6BADA;AAEA,kBAFA,EAFA;;AAMA,sBANA;AAOA;;AAEA,aADA,IACA,SADA,IACA;AACA;AACA,8BAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WARA,MAQA;AACA;AACA,+BADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA,SA3BA;;AA6BA,KArGA;;;AAwGA;AACA,gBAzGA,0BAyGA;AACA;AACA,gDADA;AAEA;AACA,6BADA,EAFA;;AAKA,sBALA;AAMA;;AAEA,aADA,IACA,SADA,IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAJA;AAKA;AACA;AACA;AACA;AACA;AACA,aAHA,MAGA;AACA;AACA;AACA,WAfA,MAeA;AACA;AACA,+BADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA,SAjCA;;AAmCA,KA7IA;;AA+IA;AACA,oBAhJA,4BAgJA,QAhJA,EAgJA,IAhJA,EAgJA;AACA;AACA,mDADA;AAEA;AACA,6BADA;AAEA,4BAFA,EAFA;;AAMA,sBANA;AAOA;;AAEA,aADA,IACA,SADA,IACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA,aAFA,MAEA;AACA;AACA;;AAEA,WAVA,MAUA;AACA;AACA,WAFA,MAEA;AACA;AACA,6BADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA,SA9BA;;AAgCA,KAjLA;;;AAoLA;AACA,mBArLA,2BAqLA,OArLA,EAqLA,IArLA,EAqLA;AACA;AACA,sDADA;AAEA;AACA,0BADA,EAFA;;AAKA,sBALA;AAMA;;AAEA,aADA,IACA,SADA,IACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA,WARA,MAQA;AACA;AACA,WAFA,MAEA;AACA;AACA,6BADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA,SA3BA;;AA6BA,KAnNA;;AAqNA;AACA,cAtNA,sBAsNA,QAtNA,EAsNA,IAtNA,EAsNA;AACA;AACA,kDADA;AAEA;AACA,6BADA;AAEA,4BAFA,EAFA;;AAMA,sBANA;AAOA;;AAEA,aADA,IACA,SADA,IACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA,iCADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA;AACA,SApBA;;;AAuBA,KA9OA;;;;AAkPA,aAlPA,uBAkPA;;AAEA;AACA,iDADA;;AAGA,KAvPA;;AAyPA,WAzPA,qBAyPA;;AAEA;AACA,mCADA;;AAGA,KA9PA;AA+PA,cA/PA,sBA+PA,IA/PA,EA+PA;;AAEA;AACA;AACA,sGADA;;AAGA,OAJA,MAIA;AACA;AACA,4GADA;;AAGA;;AAEA,KA3QA;;AA6QA;AACA;AACA,QA/QA,gBA+QA,MA/QA,EA+QA;AACA;AACA,KAjRA,EA5BA;;AA+SA;AACA,cADA,sBACA,IADA,EACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAPA,EA/SA,E;;;;;;;;;;;;;;AC7EA;AAAA;AAAA;AAAA;AAA6uC,CAAgB,0sCAAG,EAAC,C;;;;;;;;;;ACAjwC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm._f(\"changeTime\")(_vm.requestTime)\n\n  var l0 = !_vm.nofriend\n    ? _vm.__map(_vm.friend, function(item, index) {\n        var $orig = _vm.__get_orig(item)\n\n        var f1 = _vm._f(\"changeTime\")(item.lastTime)\n\n        return {\n          $orig: $orig,\n          f1: f1\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0,\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\r\n\t<view class=\"content\">\r\n\r\n\t\t<!-- 导航栏部分 -->\r\n\t\t<view class=\"top-bar\">\r\n\t\t\t<navigator :url=\"'../userhome/userhome?id='+userid\" class=\"top-bar-left\">\r\n\t\t\t\t<!-- \t//用户头像 -->\r\n\t\t\t\t<image :src=\"imgurl\"></image>\r\n\t\t\t</navigator>\r\n\t\t\t<view class=\"top-bar-center\">\r\n\t\t\t\t<image src=\"../../static/images/index/logo.jpeg\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"top-bar-right\">\r\n\t\t\t\t<view class=\"search\">\r\n\t\t\t\t\t<image src=\"../../static/images/index/search.png\" mode=\"\" @tap=\"toSerch\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"add\">\r\n\t\t\t\t\t<image src=\"../../static/images/index/add.png\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 列表部分 -->\r\n\t\t<view class=\"main\">\r\n\t\t\t<view class=\"Refresh\" v-show=\"isRefresh\">正在刷新</view>\r\n\r\n\t\t\t<!-- 好友申请 -->\r\n\t\t\t<view class=\"friends\" v-show=\"requestNum>0\" @tap=\"goRequest\">\r\n\t\t\t\t<view class=\"friends-list\">\r\n\t\t\t\t\t<view class=\"friend-list-l\">\r\n\t\t\t\t\t\t<text class=\"tip\">{{requestNum}}</text>\r\n\t\t\t\t\t\t<image src=\"../../static/images/image/2.jpeg\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"friend-list-r\">\r\n\t\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t\t<view class=\"name\">好友申请</view>\r\n\t\t\t\t\t\t\t<view class=\"time\">{{requestTime | changeTime}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"news\">有陌生人申请加你为好友</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"nofriend\" v-if=\"nofriend\" >\r\n\t\t\t\t<view class=\"tiptext\">你还没有好友，去寻找盆友吧</view>\r\n\t\t\t\t<button class=\"searchfriend\"  @tap=\"toSerch\">搜索好友</button>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t<!-- 聊天框 -->\r\n\t\t\t<view v-else class=\"friends\">\r\n\t\t\t\t<view class=\"friends-list\" v-for=\"(item,index) in friend\" :key=\"index\" @tap=\"toChatRoom(item)\">\r\n\t\t\t\t\t<view class=\"friend-list-l\">\r\n\t\t\t\t\t\t<text class=\"tip\" v-if=\"item.tip>0\">{{item.tip}}</text>\r\n\t\t\t\t\t\t<image :src='item.imgurl'></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"friend-list-r\">\r\n\t\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t\t<view class=\"name\">{{item.name}}</view>\r\n\t\t\t\t\t\t\t<view class=\"time\">{{item.lastTime | changeTime}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"news\">{{item.message}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\r\n\t\t</view>\r\n\r\n\t</view>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport datas from '../../commons/js/data.js'\r\n\timport myFunction from '../../commons/js/myFunction.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfriend: [],\r\n\t\t\t\tuserid: '',\r\n\t\t\t\timgurl: '',\r\n\t\t\t\ttoken: '',\r\n\t\t\t\trequestNum: 0, //好友申请数量\r\n\t\t\t\trequestTime: '', //最后的好友申请时间\r\n\t\t\t\tisRefresh: false,\r\n\t\t\t\tnofriend: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\t\t\r\n\t\t\tthis.getLoginStorage()\r\n\t\t\tthis.getFriendList()\r\n\t\t\tthis.friendRequest()\r\n\t\t\tthis.join(this.userid)\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\r\n\t\tonPullDownRefresh() { //监听下拉刷新\r\n\t\t\tthis.isRefresh = true\t\t\t\r\n\t\t\tthis.getFriendList()\r\n\t\t},\r\n\r\n\r\n\t\tmethods: {\r\n\t\t\t//获取由登录页缓存的数据\r\n\t\t\tgetLoginStorage() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst value = uni.getStorageSync('user')\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tthis.userid = value.id\r\n\t\t\t\t\t\tthis.token = value.token\r\n\t\t\t\t\t\tthis.imgurl = this.$serverUrl + '/user/' + value.imgurl\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch {\r\n\t\t\t\t\tconsole.log('获取缓存失败');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\t// getFrends() {\r\n\t\t\t// \tthis.friend = datas.frineds();\r\n\t\t\t// \tfor (let i = 0; i < this.friend.length; i++) {\r\n\t\t\t// \t\tthis.friend[i].imgUrl = `../../static/images/image/${this.friend[i].imgUrl}`\r\n\t\t\t// \t}\r\n\t\t\t// \t// console.log(this.friend);\r\n\t\t\t// },\r\n\r\n\t\t\t//获取好友列表\r\n\t\t\tgetFriendList() {\r\n\t\t\t\tthis.friend=[]\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$serverUrl + '/index/getfriend',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuserid: this.userid,\r\n\t\t\t\t\t\tstate: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet status = data.status\r\n\t\t\t\t\t\tlet res = data.data //好友列表\r\n\t\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\t\tif (res.length > 0) {\r\n\t\t\t\t\t\t\t\tres.map(item => {\r\n\t\t\t\t\t\t\t\t\titem.imgurl = this.$serverUrl + '/user/' + item.imgurl\r\n\t\t\t\t\t\t\t\t\tthis.getFriendMessage(item.id, item)\r\n\t\t\t\t\t\t\t\t\tthis.unReadyNum(item.id, item)\r\n\t\t\t\t\t\t\t\t\tthis.friend.push(item)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.getGroupList()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取好友列表失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.isRefresh) {\r\n\t\t\t\t\t\t\tthis.isRefresh = false\r\n\t\t\t\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//好友申请信息获取\r\n\t\t\tfriendRequest() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$serverUrl + '/index/getfriend',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuserid: this.userid,\r\n\t\t\t\t\t\tstate: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet status = data.status\r\n\t\t\t\t\t\tlet res = data.data //向用户发送好友申请的列表\r\n\t\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\t\tthis.requestNum = res.length\r\n\t\t\t\t\t\t\tfor (let i = 0; i < res.length; i++) {\r\n\t\t\t\t\t\t\t\tif (this.requestTime < res[i].lastTime) {\r\n\t\t\t\t\t\t\t\t\tthis.requestTime = res[i].lastTime\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取申请列表失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//获取群列表\r\n\t\t\tgetGroupList() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$serverUrl + '/index/getgroup',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuserid: this.userid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet status = data.status\r\n\t\t\t\t\t\tlet res = data.data\r\n\t\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\t\tif (res.length > 0) {\r\n\t\t\t\t\t\t\t\tres.map(item => {\r\n\t\t\t\t\t\t\t\t\titem.imgurl = this.$serverUrl + '/user/' + item.imgurl\r\n\t\t\t\t\t\t\t\t\tthis.getGroupMessage(item.groupid, item)\r\n\t\t\t\t\t\t\t\t\tthis.friend.push(item)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.friend = myFunction.messageOrder(this.friend, 'lastTime')\r\n\t\t\t\t\t\t\tif (this.friend.length == 0) {\r\n\t\t\t\t\t\t\t\tconsole.log(2);\r\n\t\t\t\t\t\t\t\tthis.nofriend = true\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.nofriend = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取申请列表失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//获取好友最后消息\r\n\t\t\tgetFriendMessage(friendid, item) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$serverUrl + '/index/getlastmsg/',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuserid: this.userid,\r\n\t\t\t\t\t\tfriendid: friendid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet status = data.status\r\n\t\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\t\t// item.message=data.data.message\r\n\t\t\t\t\t\t\tif (data.data.type == '0') {\r\n\t\t\t\t\t\t\t\tthis.$set(item, 'message', data.data.message)\r\n\t\t\t\t\t\t\t} else if (data.data.type == '1') {\r\n\t\t\t\t\t\t\t\tthis.$set(item, 'message', '[图片]')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$set(item, 'message', '[链接]')\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if (status == 300) {\r\n\t\t\t\t\t\t\titem.message = ''\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取消息失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//获取群最后消息\r\n\t\t\tgetGroupMessage(groupid, item) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$serverUrl + '/index/getonegroupmsg',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tgroupid: groupid,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet status = data.status\r\n\t\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\t\tif (data.data.type == '0') {\r\n\t\t\t\t\t\t\t\tthis.$set(item, 'message', data.data.message)\r\n\t\t\t\t\t\t\t} else if (data.data.type == '1') {\r\n\t\t\t\t\t\t\t\tthis.$set(item, 'message', '[图片]')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$set(item, 'message', '[链接]')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (status == 300) {\r\n\t\t\t\t\t\t\titem.message = ''\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取消息失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//获取好友间未读消息数量\r\n\t\t\tunReadyNum(friendid, item) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$serverUrl + '/index/unreadymsg',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuserid: this.userid,\r\n\t\t\t\t\t\tfriendid: friendid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\tdata: data\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tlet status = data.status\r\n\t\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\t\tthis.$set(item, 'tip', data.num)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '获取未读消息数量失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\tgoRequest() {\r\n\t\t\t\t\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/friendrequest/friendrequest'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\ttoSerch() {\r\n\t\t\t\t\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/search/search'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoChatRoom(item){\r\n\t\t\t\t\r\n\t\t\t\tif(item.id){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:'/pages/chatroom/chatroom?id='+item.id+'&name='+item.name+ '&img='+item.imgurl\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:'/pages/chatroom/chatroom?gid='+item.groupid+'&name='+item.name+ '&img='+item.imgurl\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// socket模块\r\n\t\t\t//用户登录socket注册\r\n\t\t\tjoin(userid){\r\n\t\t\t\tthis.$socket.emit('login',userid)\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tchangeTime(time) {\r\n\t\t\t\tif (time == '') {\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn myFunction.dateTime(time)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding-top: var(--status-bar-height);\r\n\t\tpadding-bottom: $uni-spacing-col-base;\r\n\t}\r\n\r\n\t.top-bar {\r\n\t\tposition: fixed;\r\n\t\tz-index: 1000;\r\n\t\ttop: var(--status-bar-height);\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 88rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: $uni-bg-color;\r\n\t\tborder-bottom: 1px solid $uni-border-color;\r\n\t\tpadding-left: $uni-spacing-col-base;\r\n\t\tpadding-right: $uni-spacing-col-base;\r\n\r\n\t\t.top-bar-left {\r\n\t\t\tfloat: left;\r\n\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 68rpx;\r\n\t\t\t\theight: 68rpx;\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\tbackground-color: $uni-color-primary;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.top-bar-center {\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 50%;\r\n\t\t\ttop: 50%;\r\n\t\t\tmargin-top: -34rpx;\r\n\t\t\tmargin-left: -30rpx;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 68rpx;\r\n\t\t\t\theight: 68rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.top-bar-right {\r\n\t\t\tfloat: right;\r\n\t\t\tmargin-top: 15rpx;\r\n\r\n\t\t\t.search {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\tborder: 1px solid red;\r\n\t\t\t}\r\n\r\n\t\t\t.add {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tborder: 1px solid red;\r\n\t\t\t}\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 52rpx;\r\n\t\t\t\theight: 52rpx;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t.main {\r\n\t\twidth: 100%;\r\n\t\tpadding-top: 96rpx;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t.Refresh {\r\n\t\t\theight: 150rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\tline-height: 250rpx;\r\n\t\t\tborder-bottom: 1px solid rgba(223, 223, 223, 1.0);\r\n\t\t}\r\n\t\t\r\n\t\t.nofriend{\r\n\t\t\tpadding-top: 400rpx;\r\n\t\t\t.tiptext{\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tpadding-bottom: 50rpx;\r\n\t\t\t}\r\n\t\t\t.searchfriend{\r\n\t\t\t\twidth: 200rpx;\r\n\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tbackground-color: rgba(0, 155, 219, 1.0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.friends-list {\r\n\t\theight: 96rpx;\r\n\t\tpadding: 16rpx $uni-spacing-col-base;\r\n\t\tborder-bottom: 1px solid rgba(241, 241, 241, 1.0);\r\n\r\n\t\t&:active {\r\n\t\t\t//点击变色\r\n\t\t\tbackground-color: $uni-bg-color-grey;\r\n\t\t}\r\n\r\n\t\t.friend-list-l {\r\n\t\t\tposition: relative;\r\n\t\t\tfloat: left;\r\n\r\n\t\t\timage {\r\n\t\t\t\twidth: 96rpx;\r\n\t\t\t\theight: 96rpx;\r\n\t\t\t\tborder-radius: $uni-border-radius-base;\r\n\t\t\t}\r\n\r\n\t\t\t.tip {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tz-index: 10;\r\n\t\t\t\ttop: -8rpx;\r\n\t\t\t\tleft: 68rpx;\r\n\t\t\t\theight: 36rpx;\r\n\t\t\t\tmin-width: 20rpx;\r\n\t\t\t\tpadding: 0 8rpx;\r\n\t\t\t\tbackground-color: $uni-color-warning;\r\n\t\t\t\tborder-radius: 18rpx;\r\n\t\t\t\tfont-size: $uni-font-size-sm;\r\n\t\t\t\tcolor: $uni-text-color-inverse;\r\n\t\t\t\tline-height: 36rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.friend-list-r {\r\n\t\t\tpadding-left: 128rpx;\r\n\r\n\t\t\t.top {\r\n\t\t\t\theight: 50rpx;\r\n\r\n\t\t\t\t.name {\r\n\t\t\t\t\tfloat: left;\r\n\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\tcolor: $uni-text-color;\r\n\t\t\t\t\tline-height: 50rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.time {\r\n\t\t\t\t\tfloat: right;\r\n\t\t\t\t\tfont-size: $uni-font-size-sm;\r\n\t\t\t\t\tcolor: $uni-text-color-disable;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.news {\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\tfont-size: $uni-font-size-base;\r\n\t\t\t\tcolor: $uni-text-color-grey;\r\n\t\t\t\tline-height: 40rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1670853013427\n      var cssReload = require(\"D:/HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}